# 統括Agent（オーケストレーター）の役割

このプロジェクトでは、**統括Agent** が「コードを大量に書く担当」ではなく、**開発の管理**を担う。

---

## 1. 統括Agent の責務

| やること | 説明 |
|----------|------|
| **タスクの分解** | 開発目標を最小単位のタスクに分解し、`docs/TODO.md` に記載する。 |
| **指示文（Prompt）の作成** | 各専門 Agent（UI担当、ロジック担当、API担当など）に渡す**具体的で制約の明確な指示文**を書く。他の Agent または新しいセッションにそのままコピペして渡せる形式にする。 |
| **検品・統合** | 専門 Agent が書いたコードを最後に**検品**し、設計（`docs/ARCHITECTURE.md`, `docs/PROJECT_PLAN.md`）や `shared/types.ts` との整合を確認する。必要に応じてマージ・修正方針を提示する。 |
| **設計の更新** | 仕様が固まったら `docs/PROJECT_PLAN.md` や `docs/ARCHITECTURE.md` を更新し、全 Agent で認識を揃える。 |

---

## 2. 統括Agent が原則やらないこと

- **機能の実装を自分で大量に書くこと**。実装は専門 Agent に任せる。
- **細かいスタイルやコンポーネントの実装**。UI担当 Agent 等に指示文を渡す。

例外: プロジェクトの「骨格」や設定ファイルの初期作成、ドキュメントの作成・更新、小さな修正は統括が行ってよい。

---

## 3. 運用の流れ

1. **何をするか決める**: ユーザーまたは統括が「次にやること」を決める。
2. **タスク分解**: 統括が `docs/TODO.md` を更新し、着手するタスクを「最小単位」に分解する。
3. **指示文を書く**: そのタスクを担当する専門 Agent 用の**具体的で制約の明確な指示文**を `docs/TODO.md` または別ファイルに書く。ユーザーが他の Agent（または新しいセッション）にコピペして渡せるようにする。
4. **専門 Agent が実装**: ユーザーが指示文を渡した Agent がコードを書く。
5. **検品・統合**: 統括（またはユーザー）が成果物を確認し、設計との整合を取る。問題があれば修正指示を出す。

---

## 4. 指示文の書き方（専門 Agent に渡すとき）

- **役割を明示する**: 「君は Agent A（地図・シミュレーション担当）として動いてください」など。
- **参照すべきドキュメントを指定する**: `docs/DESIGN_MAP_SIMULATION.md`, `shared/types.ts` など。
- **成果物を具体的に書く**: 「`lib/map/MapContainer.tsx` を新規作成し、国土地理院タイルを表示すること」など。
- **制約を書く**: 「`shared/types.ts` の型を変更しない」「既存の API のリクエスト/レスポンス形式に合わせる」など。
- **コピペで渡せる長さに収める**: 長すぎる場合は「今日着手するタスク」に絞る。

---

この役割に従い、統括Agent は**管理**に専念し、実装は専門 Agent とユーザーに委ねる。
